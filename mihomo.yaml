# ä½¿ç”¨å‰å¿…è¯»
# 1ã€åŸåˆ™ä¸Šåªè¦å¡«å…¥æœºåœºè®¢é˜…åœ°å€å³å¯ï¼Œæœç´¢ proxy-providers
# 2ã€DNS æ³„éœ²æ£€æµ‹ï¼šhttps://browserleaks.com/webrtc / https://ipleak.net
# 3ã€è‡ªå®šä¹‰è§„åˆ™ï¼Œè¯·å‚è€ƒ rule-providers æŠ„ä½œä¸šå³å¯

# æœºåœºè®¢é˜…ï¼Œåç§°ä¸èƒ½é‡å¤
proxy-providers:
  æœºåœºè®¢é˜…åœ°å€:
    type: http
    interval: 1800
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 300
    proxy: DIRECT
    url: "é“¾æ¥"
   
#### ---- åŸºç¡€è®¾ç½® ---- ####
# HTTP ä»£ç†ç«¯å£
port: 7890

# Socks5 ä»£ç†ç«¯å£
socks-port: 7891

# HTTP / Sock5 æ··åˆç«¯å£
mixed-port: 7892

# é€æ˜ä»£ç†è½¬å‘ç«¯å£
redir-port: 7893
tproxy-port: 7894

# æ˜¯å¦å…è®¸å±€åŸŸç½‘å…¶ä»–è®¾ç½®è®¿é—®ï¼Œtrue / falseï¼Œå»ºè®®è®¾ç½®ä¸º true
allow-lan: true

# ç»‘å®š IP åœ°å€ï¼Œå½“ allow-lan ä¸º true æ—¶ç”Ÿæ•ˆ
bind-address: "*"

# æ¨¡å¼ï¼ŒRuleï¼ˆè§„åˆ™ï¼‰ / Globalï¼ˆå…¨å±€ï¼‰ / Directï¼ˆç›´è¿ï¼‰ï¼Œå»ºè®®è®¾ç½®ä¸º rule
mode: rule

# æ›´æ¢å»¶è¿Ÿè®¡ç®—æ–¹å¼ï¼Œå»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿï¼Œtrue / falseï¼Œå»ºè®®è®¾ç½®ä¸º true
unified-delay: true

# TCPå¹¶å‘ï¼Œtrue / falseï¼Œå»ºè®®è®¾ç½®ä¸º true
tcp-concurrent: true

# è¾“å‡ºæ—¥å¿—ç­‰çº§
# silent ä¸è¾“å‡º
# error ä»…è¾“å‡ºå‘ç”Ÿé”™è¯¯è‡³æ— æ³•ä½¿ç”¨çš„æ—¥å¿—
# warning è¾“å‡ºå‘ç”Ÿé”™è¯¯ä½†ä¸å½±å“è¿è¡Œçš„æ—¥å¿—ï¼Œä»¥åŠ error çº§åˆ«å†…å®¹
# info è¾“å‡ºä¸€èˆ¬è¿è¡Œçš„å†…å®¹ï¼Œä»¥åŠ error å’Œ warning çº§åˆ«çš„æ—¥å¿—
# debug å°½å¯èƒ½çš„è¾“å‡ºè¿è¡Œä¸­æ‰€æœ‰çš„ä¿¡æ¯
# å»ºè®®ï¼šå½“å‡ºç°é—®é¢˜æ— æ³•å¯åŠ¨é—®é¢˜æ—¶ï¼Œå°†æ—¥å¿—ç­‰çº§ä¿®æ”¹ä¸º debugï¼Œç„¶å Google æœç´¢ç­”æ¡ˆæˆ–è€…ç”µæŠ¥ç¾¤æ±‚åŠ©
log-level: warning

# æ˜¯å¦å…è®¸å†…æ ¸æ¥å— IPv6 æµé‡ï¼Œtrue / falseï¼Œå»ºè®®è®¾ç½®ä¸º false
# å»ºè®®ï¼šå¦‚æœä½ å¯¹ ipv6 æ²¡æœ‰éœ€æ±‚æ—¶ï¼Œå°±ä¸è¦æ‰“å¼€äº†ï¼Œå®¹æ˜“å¼•å‘å„ç§æœªçŸ¥é—®é¢˜
ipv6: false

#### ---- ç•Œé¢(API) ---- ####
# å¤–éƒ¨ç”¨æˆ·ç•Œé¢è¡¨æ€èµ„æºå­˜å‚¨è·¯å¾„ï¼Œç›´æ¥å†™ ui ä¹Ÿå¯ä»¥ï¼ŒClash çš„å·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„éƒ½å¯ä»¥
# å¦‚æœå¤šä¸ªå·¥å…·ä½¿ç”¨ï¼Œå»ºè®®å†™ç›¸å¯¹è·¯å¾„å°±å¥½äº†ï¼Œä¾‹å¦‚ ui
external-ui: ui

# è‡ªå®šä¹‰å¤–éƒ¨ç”¨æˆ·ç•Œé¢åå­—ï¼Œéå¿…é¡»ï¼Œæ›´æ–°æ—¶ä¼šæ›´æ–°åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œä¸é…ç½®åˆ™ç›´æ¥æ›´æ–°åˆ° external-ui ç›®å½•
external-ui-name: MetaCubeXD

# è‡ªå®šä¹‰å¤–éƒ¨ç”¨æˆ·ç•Œé¢ä¸‹è½½åœ°å€
# å›½å†…ï¼šhttps://ghp.ci/https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip
# å›½å¤–ï¼šhttps://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip
external-ui-url: https://ghp.ci/https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip

# API ç›‘å¬åœ°å€ï¼Œé»˜è®¤ä¸º 0.0.0.0:9090
external-controller: 0.0.0.0:9090

# HTTPS API ç›‘å¬åœ°å€ï¼Œéœ€è¦é…ç½® tls éƒ¨åˆ†è¯ä¹¦å’Œå…¶ç§é’¥é…ç½®ï¼Œä½¿ç”¨ TLS ä¹Ÿå¿…é¡»å¡«å†™ external-controller
# ä¸å»ºè®®è¿™æ ·ç”¨ï¼Œå¯ä»¥å¦å¤–é€šè¿‡å…¶ä»–åå‘ä»£ç†æ¥å¯åŠ¨ HTTPï¼Œå½“å‰ä¹Ÿä¸å»ºè®®ä½ æŠŠ UI å¼€æ”¾åˆ°å…¬ç½‘
# external-controller-tls: 127.0.0.1:9443

# è®¿é—®å¯†é’¥ï¼Œå»ºè®®è®¤çœŸè®¾ç½®ï¼Œä¸æ¨èè®¾ç½®ä¸ºç©º
secret: nh430521

#### ---- Geo Data ---- ####
# æ›´æ”¹ geoip ä½¿ç”¨æ–‡ä»¶ï¼Œmmdb æˆ– datï¼Œå¯é€‰ true / falseï¼Œtrue ä¸º datï¼Œæ­¤é¡¹æœ‰é»˜è®¤å€¼ false
geodata-mode: false

# GEOæ–‡ä»¶åŠ è½½æ¨¡å¼
# standardï¼šæ ‡å‡†åŠ è½½å™¨
# memconservativeï¼šä¸“ä¸ºå†…å­˜å—é™(å°å†…å­˜)è®¾å¤‡ä¼˜åŒ–çš„åŠ è½½å™¨(é»˜è®¤å€¼)
geodata-loader: standard

# è‡ªå®š GEO ä¸‹è½½åœ°å€
# å¦‚æœä¸‹è½½ä¸äº†ï¼Œå¯ä»¥åœ¨å‰é¢å¢åŠ  https://ghp.ci/
geox-url:
  geosite: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.metadb
  geoip: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat
  asn: https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb

# æ˜¯å¦è‡ªåŠ¨æ›´æ–° GEO æ•°æ®
geo-auto-update: true

# GEO æ•°æ®æ›´æ–°é—´éš”ï¼Œå•ä½ä¸ºå°æ—¶
geo-update-interval: 24

#### ---- æ‰©å±•é…ç½® ---- ####
# always å¼€å¯ï¼Œå¼ºåˆ¶åŒ¹é…æ‰€æœ‰è¿›ç¨‹
# strict é»˜è®¤ï¼Œç”± Clash åˆ¤æ–­æ˜¯å¦å¼€å¯
# off ä¸åŒ¹é…è¿›ç¨‹ï¼Œæ¨èåœ¨è·¯ç”±å™¨ä¸Šä½¿ç”¨æ­¤æ¨¡å¼
find-process-mode: strict

# å…¨å±€ TLS æŒ‡çº¹ï¼Œä¼˜å…ˆä½äº proxy å†…çš„ client-fingerprintã€‚
# ç›®å‰æ”¯æŒå¼€å¯ TLS ä¼ è¾“çš„ TCP/grpc/WS/HTTP , æ”¯æŒåè®®æœ‰ VLESS,Vmess å’Œ trojan.
# å¯é€‰ï¼š"chrome", "firefox", "safari", "iOS", "android", "edge", "360"," qq", "random"
# è‹¥é€‰æ‹© "random", åˆ™æŒ‰ Cloudflare Radar æ•°æ®æŒ‰æ¦‚ç‡ç”Ÿæˆä¸€ä¸ªç°ä»£æµè§ˆå™¨æŒ‡çº¹ã€‚
global-client-fingerprint: chrome

# TCP Keep Alive çš„æœ€å¤§ç©ºé—²æ—¶é—´ï¼Œå•ä½ä¸ºç§’
keep-alive-idle: 600

# æ§åˆ¶ Clash å‘å‡º TCP Keep Alive åŒ…çš„é—´éš”ï¼Œå•ä½ä¸ºç§’ï¼Œå‡å°‘ç§»åŠ¨è®¾å¤‡è€—ç”µé—®é¢˜çš„ä¸´æ—¶æªæ–½ã€‚
keep-alive-interval: 30

# ç¦ç”¨ TCP Keep Aliveï¼Œåœ¨ Android é»˜è®¤ä¸º true
# disable-keep-alive: false

profile:
  # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-selected: true

  # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€
  store-fake-ip: true

# æµé‡å—…æ¢
sniffer:
  # æ˜¯å¦å¯ç”¨åŠŸèƒ½ï¼Œtrue / falseï¼Œå»ºè®®è®¾ç½®ä¸º true
  enable: true

  # å¯¹ redir-host ç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢ï¼Œå»ºè®®è®¾ç½®ä¸º true
  force-dns-mapping: true

  # å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢ï¼Œå»ºè®®è®¾ç½®ä¸º true
  parse-pure-ip: true

  # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ä¸º true
  override-destination: false

  # éœ€è¦å—…æ¢çš„åè®®è®¾ç½®ï¼Œä»…æ”¯æŒ HTTP / TLS / QUIC
  # ports: ç«¯å£èŒƒå›´
  # override-destination: è¦†ç›–å…¨å±€ override-destination è®¾ç½®
  # å»ºè®®ï¼šé»˜è®¤å³å¯
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]

  # å¼ºåˆ¶è¿›è¡Œå—…æ¢çš„åŸŸååˆ—è¡¨ï¼Œä½¿ç”¨åŸŸåé€šé…ï¼ŒæŒ‰éœ€è®¾ç½®
  force-domain:
    - +.v2ex.com

  # è·³è¿‡å—…æ¢çš„åŸŸååˆ—è¡¨ï¼Œä½¿ç”¨åŸŸåé€šé…ï¼ŒæŒ‰éœ€è®¾ç½®
  skip-domain:
    - "dlg.io.mi.com"
    - "+.push.apple.com"
    - "+.apple.com"
  
  # è·³è¿‡å—…æ¢çš„æ¥æº IP æ®µåˆ—è¡¨ï¼ŒæŒ‰éœ€è®¾ç½®
  # skip-src-address:
  #   - 192.168.0.3/32

  # è·³è¿‡å—…æ¢çš„ç›®æ ‡ IP æ®µåˆ—è¡¨ï¼ŒæŒ‰éœ€è®¾ç½®
  # skip-dst-address:
  #   - 192.168.0.3/32

#### ---- DNS é…ç½® ---- ####
dns:
  # æ˜¯å¦å¯ç”¨ DNS æŒŸæŒåŠŸèƒ½ï¼Œtrue / falseï¼Œå»ºè®®è®¾ç½®ä¸º true
  enable: true

  # DNS æœåŠ¡ç›‘å¬ï¼Œä»…æ”¯æŒ udp
  listen: 0.0.0.0:7874

  # æ˜¯å¦è§£æ IPV6, å¦‚ä¸º false, åˆ™å›åº” AAAA çš„ç©ºè§£æ
  ipv6: false

  # DOH ä¼˜å…ˆä½¿ç”¨ http/3ï¼Œtrue / falseï¼Œå»ºè®®è®¾ç½®ä¸º true
  prefer-h3: true

  # dns è¿æ¥éµå®ˆè·¯ç”±è§„åˆ™ï¼Œéœ€é…ç½® proxy-server-nameserver
  respect-rules: true

  # DNS å¤„ç†æ¨¡å¼ï¼Œå¯é€‰å€¼ fake-ip / redir-hostï¼Œé»˜è®¤ redir-host
  # å»ºè®®ï¼šå¦‚æœæƒ³è¦å…¼å®¹æ€§å¥½ï¼Œé€‰æ‹© redir-host ä¼šå‡å°‘ä¸€äº›é—®é¢˜ï¼Œå¦‚æœæƒ³æ€§èƒ½å¥½ä¸€ä¸¢ä¸¢ï¼Œå¯ä»¥é€‰æ‹© fake-ip
  enhanced-mode: redir-host

  # fakeip ä¸‹çš„ IP æ®µè®¾ç½®ï¼Œtun çš„é»˜è®¤ IPV4 åœ°å€ ä¹Ÿä½¿ç”¨æ­¤å€¼ä½œä¸ºå‚è€ƒ
  fake-ip-range: 198.18.0.1/16

  # å¯é€‰ blacklist / whitelistï¼Œé»˜è®¤ blacklistï¼Œwhitelist å³åªæœ‰åŒ¹é…æˆåŠŸæ‰è¿”å› fake-ip
  fake-ip-filter-mode: blacklist

  # fakeip è¿‡æ»¤ï¼Œä»¥ä¸‹åœ°å€ä¸ä¼šä¸‹å‘ fakeip æ˜ å°„ç”¨äºè¿æ¥ï¼Œå€¼æ”¯æŒåŸŸåé€šé…ä»¥åŠå¼•å…¥åŸŸåé›†åˆ
  # geoip:private ä¸ºç‰¹æ®Šé¡¹ï¼Œå›Šæ‹¬äº†å†…ç½‘IPå’Œä¿ç•™IPï¼Œå…¶ä½™ç±»åˆ«å›Šæ‹¬äº†å„ä¸ªå›½å®¶/åœ°åŒºçš„IPåœ°å€æ®µ
  # å»ºè®®ï¼šå¦‚æœä½¿ç”¨ fake-ip æ¨¡å¼ï¼Œå»ºè®®è¿™é‡Œå°†å›½å†…å’Œç‰¹æ®Šé¡¹è¿”å›çœŸå® IP
  fake-ip-filter:
    - "+.lan"
    - "+.local"
    - geosite:private
    - geosite:cn
  
  # é»˜è®¤ DNS, ç”¨äºè§£æ DNS æœåŠ¡å™¨ çš„åŸŸå
  # å»ºè®®ï¼šè®¾ç½®å›½å†…çš„ UDP DNS å³å¯ï¼Œå¦‚æœæœ‰æŒŸæŒæƒ…å†µï¼Œå¯è€ƒè™‘ä¸º DoH / DoT
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  # ä»£ç†èŠ‚ç‚¹åŸŸåè§£ææœåŠ¡å™¨ï¼Œä»…ç”¨äºè§£æä»£ç†èŠ‚ç‚¹çš„åŸŸåï¼Œå¦‚æœä¸å¡«åˆ™éµå¾ªnameserver-policyã€nameserverå’Œfallbackçš„é…ç½®
  # å»ºè®®ï¼šè®¾ç½®å›½å†…çš„ UDP DNS å³å¯
  proxy-server-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  # é»˜è®¤çš„åŸŸåè§£ææœåŠ¡å™¨
  # å»ºè®®ï¼šè®¾ç½®å›½å†…çš„ UDP DNS å³å¯
  nameserver:
    - 223.5.5.5
    - 119.29.29.29

  # åå¤‡åŸŸåè§£ææœåŠ¡å™¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨å¢ƒå¤– DNS, ä¿è¯ç»“æœå¯ä¿¡ï¼Œé…ç½® fallbackåé»˜è®¤å¯ç”¨ fallback-filter,geoip-codeä¸º cn
  # å»ºè®®ï¼šè®¾ç½®å›½å¤–çš„ UDP DNS å³å¯ï¼Œå¦‚æœæƒ³æ›´å®‰å…¨ä¸€ä¸¢ä¸¢ï¼Œå¯ä»¥ä½¿ç”¨ DoH / DoT
  fallback:
    - 8.8.8.8
    - 8.8.4.4

  # æŒ‡å®šåŸŸåæŸ¥è¯¢çš„è§£ææœåŠ¡å™¨ï¼Œå¯ä½¿ç”¨ geosite, ä¼˜å…ˆäº nameserver/fallback æŸ¥è¯¢
  # å»ºè®®ï¼šè¿™é‡Œå¯ç”¨æ¥åš DNS åˆ†æµï¼Œé˜²æ³„éœ² / é˜²æŒŸæŒï¼Œå¯æ ¹æ®è‡ªå·±çš„è§„åˆ™é€‚å½“å¢åŠ ï¼Œæ­¤å¤„æ”¯æŒ rule-set
  nameserver-policy:
    "geosite:cn,private": # å›½å†…ï¼Œå¦‚æœ UDP DNS æ²¡å•¥é—®é¢˜ï¼Œå›½å†…ä¸å»ºè®®ä½¿ç”¨ DoH / DoT
      - "https://doh.pub/dns-query"
      - "https://dns.alidns.com/dns-query"
    "geosite:geolocation-!cn": # éCNï¼Œå³å›½å¤–ï¼Œä¸€èˆ¬å»ºè®® DoH / DoT
      - "https://dns.cloudflare.com/dns-query"
      - "https://dns.google/dns-query"

#### ---- Tun Proxy é…ç½® ---- ####
tun:
  # æ˜¯å¦å¯ç”¨ Tun Proxy é€æ˜ä»£ç†ï¼Œtrue / falseï¼Œå»ºè®®è®¾ç½®ä¸º true
  enable: true

  # tun æ¨¡å¼å †æ ˆï¼Œå¯ç”¨å€¼ system / gvisor / mixedï¼Œå¦‚æ— ä½¿ç”¨é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ mixedæ ˆï¼Œé»˜è®¤ gvisor
  # system ä½¿ç”¨ç³»ç»Ÿåè®®æ ˆï¼Œå¯ä»¥æä¾›æ›´ç¨³å®š/å…¨é¢çš„ tun ä½“éªŒï¼Œä¸”å ç”¨ç›¸å¯¹å…¶ä»–å †æ ˆæ›´ä½
  # gvisor é€šè¿‡åœ¨ç”¨æˆ·ç©ºé—´ä¸­å®ç°ç½‘ç»œåè®®æ ˆï¼Œå¯ä»¥æä¾›æ›´é«˜çš„å®‰å…¨æ€§å’Œéš”ç¦»æ€§ï¼ŒåŒæ—¶å¯ä»¥é¿å…æ“ä½œç³»ç»Ÿå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´çš„åˆ‡æ¢ï¼Œä»è€Œåœ¨ç‰¹å®šæƒ…å†µä¸‹å…·æœ‰æ›´å¥½çš„ç½‘ç»œå¤„ç†æ€§èƒ½
  # mixed æ··åˆå †æ ˆï¼Œtcp ä½¿ç”¨ systemæ ˆï¼Œudp ä½¿ç”¨ gvisoræ ˆï¼Œä½¿ç”¨ä½“éªŒå¯èƒ½ç›¸å¯¹æ›´å¥½
  # å»ºè®®ï¼šè®¾ç½®ä¸º mixed
  stack: mixed

  # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥ tun ç½‘å¡
  auto-route: true

  # ä»…æ”¯æŒ Linuxï¼Œè‡ªåŠ¨é…ç½® iptables/nftables ä»¥é‡å®šå‘ TCP è¿æ¥ï¼Œéœ€è¦auto-routeå·²å¯ç”¨
  # åœ¨ Android ä¸­ï¼šä»…è½¬å‘æœ¬åœ° IPv4 è¿æ¥ã€‚è¦é€šè¿‡çƒ­ç‚¹æˆ–ä¸­ç»§å…±äº«æ‚¨çš„ VPN è¿æ¥ï¼Œè¯·ä½¿ç”¨ VPNHotspotã€‚
  # åœ¨ Linux ä¸­ï¼šå¸¦æœ‰ auto-route çš„ auto-redirect ç°åœ¨å¯ä»¥åœ¨è·¯ç”±å™¨ä¸ŠæŒ‰é¢„æœŸå·¥ä½œï¼Œæ— éœ€å¹²é¢„ã€‚
  auto-redirect: true

  # è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æ¥å£ï¼Œå¤šå‡ºå£ç½‘å¡åŒæ—¶è¿æ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡
  auto-detect-interface: true
  
  # dns åŠ«æŒï¼Œå°†åŒ¹é…åˆ°çš„è¿æ¥å¯¼å…¥å†…éƒ¨ dns æ¨¡å—ï¼Œä¸ä¹¦å†™åè®®åˆ™ä¸º udp://
  # åœ¨ MacOS/Windows æ— æ³•è‡ªåŠ¨åŠ«æŒå‘å¾€å±€åŸŸç½‘çš„ dns è¯·æ±‚
  # åœ¨ Android å¦‚å¼€å¯ ç§äººdns åˆ™æ— æ³•è‡ªåŠ¨åŠ«æŒ dns è¯·æ±‚
  dns-hijack:
    - "any:53"
    - "tcp://any:53"

  # æœ€å¤§ä¼ è¾“å•å…ƒï¼Œä¼šå½±å“æé™çŠ¶æ€ä¸‹çš„é€Ÿç‡ï¼Œä¸€èˆ¬ç”¨æˆ·é»˜è®¤å³å¯ã€‚
  mtu: 9000

  # æŒ‡å®š tun ç½‘å¡åç§°ï¼ŒMacOS è®¾å¤‡åªèƒ½ä½¿ç”¨ utun å¼€å¤´çš„ç½‘å¡åï¼Œå¯é€‰é¡¹
  # device: utun0

  # å¯ç”¨ auto-route æ—¶æ‰§è¡Œä¸¥æ ¼çš„è·¯ç”±è§„åˆ™
  # åœ¨ Linux ä¸­: è®©ä¸æ”¯æŒçš„ç½‘ç»œæ— æ³•åˆ°è¾¾ï¼Œå°†æ‰€æœ‰è¿æ¥è·¯ç”±åˆ° tunï¼Œå®ƒå¯ä»¥é˜²æ­¢åœ°å€æ³„æ¼ï¼Œå¹¶ä½¿ DNS åŠ«æŒåœ¨ Android ä¸Šå·¥ä½œã€‚
  # åœ¨ Windows ä¸­:ï¼Œæ·»åŠ é˜²ç«å¢™è§„åˆ™ä»¥é˜»æ­¢ Windows çš„ æ™®é€šå¤šå®¿ä¸» DNS è§£æè¡Œä¸º é€ æˆçš„ DNS æ³„éœ²ï¼Œå®ƒå¯èƒ½ä¼šä½¿æŸäº›åº”ç”¨ç¨‹åºï¼ˆå¦‚ VirtualBoxï¼‰åœ¨æŸäº›æƒ…å†µä¸‹æ— æ³•æ­£å¸¸å·¥ä½œã€‚
  # strict-route: true

  # å¯ç”¨é€šç”¨åˆ†æ®µå¸è½½ï¼Œä»…æ”¯æŒ Linux
  # gso: true

  # æ•°æ®å—çš„æœ€å¤§é•¿åº¦
  # gso-max-size: 65536

  # UDP NAT è¿‡æœŸæ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ï¼Œé»˜è®¤ä¸º 300(5 åˆ†é’Ÿ)
  # udp-timeout: 300

  # auto-route ç”Ÿæˆçš„ iproute2 è·¯ç”±è¡¨ç´¢å¼•ï¼Œé»˜è®¤ä½¿ç”¨ 2022
  # iproute2-table-index: 2022

  # auto-route ç”Ÿæˆçš„ iproute2 è§„åˆ™èµ·å§‹ç´¢å¼•ï¼Œé»˜è®¤ä½¿ç”¨ 9000
  # iproute2-rule-index: 9000

  # å¯ç”¨ç‹¬ç«‹äºç«¯ç‚¹çš„ NATï¼Œæ€§èƒ½å¯èƒ½ä¼šç•¥æœ‰ä¸‹é™ï¼Œæ‰€ä»¥ä¸å»ºè®®åœ¨ä¸éœ€è¦çš„æ—¶å€™å¼€å¯ã€‚
  # endpoint-independent-nat: false

  # å°†æŒ‡å®šè§„åˆ™é›†ä¸­çš„ç›®æ ‡ IP CIDR è§„åˆ™æ·»åŠ åˆ°é˜²ç«å¢™ï¼Œä¸åŒ¹é…çš„æµé‡å°†ç»•è¿‡è·¯ç”± ä»…æ”¯æŒ Linuxï¼Œä¸”éœ€è¦ nftables ä»¥åŠauto-route å’Œ auto-redirect å·²å¯ç”¨ã€‚
  # route-address-set:
  #   - ruleset-1

  # å°†æŒ‡å®šè§„åˆ™é›†ä¸­çš„ç›®æ ‡ IP CIDR è§„åˆ™æ·»åŠ åˆ°é˜²ç«å¢™ï¼ŒåŒ¹é…çš„æµé‡å°†ç»•è¿‡è·¯ç”± ä»…æ”¯æŒ Linuxï¼Œä¸”éœ€è¦ nftables ä»¥åŠauto-route å’Œ auto-redirect å·²å¯ç”¨ã€‚
  # ä¸ä»»æ„é…ç½®ä¸­çš„ routing-mark å†²çª
  # route-exclude-address-set:
  #   - ruleset-2

  # å¯ç”¨ auto-routeæ—¶è·¯ç”±è‡ªå®šä¹‰è·¯ç”±ç½‘æ®µè€Œä¸æ˜¯é»˜è®¤è·¯ç”±ï¼Œä¸€èˆ¬æ— éœ€é…ç½®ã€‚
  # route-address:
  #   - 0.0.0.0/1
  #   - 128.0.0.0/1
  #   - "::/1"
  #   - "8000::/1"

  # å¯ç”¨ auto-route æ—¶æ’é™¤è‡ªå®šä¹‰ç½‘æ®µ
  # route-exclude-address:
  #   - 192.168.0.0/16
  #   - fc00::/7

  # é™åˆ¶è¢«è·¯ç”±çš„æ¥å£ï¼Œé»˜è®¤ä¸é™åˆ¶ï¼Œä¸ exclude-interface å†²çªï¼Œä¸å¯ä¸€èµ·é…ç½®
  # include-interface:
  #   - eth0
  
  # æ’é™¤è·¯ç”±çš„æ¥å£ï¼Œä¸ include-interface å†²çªï¼Œä¸å¯ä¸€èµ·é…ç½®
  # exclude-interface:
  #   - eth1

  # åŒ…å«çš„ç”¨æˆ·ï¼Œä½¿å…¶è¢« Tun è·¯ç”±æµé‡ï¼Œæœªè¢«é…ç½®çš„ç”¨æˆ·ä¸ä¼šè¢« Tun è·¯ç”±æµé‡ï¼Œé»˜è®¤ä¸é™åˆ¶
  # UID è§„åˆ™ä»…åœ¨ Linux ä¸‹è¢«æ”¯æŒ,å¹¶ä¸”éœ€è¦ auto-route
  # include-uid:
  #   - 0

  # åŒ…å«çš„ç”¨æˆ·èŒƒå›´ï¼Œä½¿å…¶è¢« Tun è·¯ç”±æµé‡ï¼Œæœªè¢«é…ç½®çš„ç”¨æˆ·ä¸ä¼šè¢« Tun è·¯ç”±æµé‡
  # include-uid-range:
  #   - 1000:9999

  # æ’é™¤ç”¨æˆ·ï¼Œä½¿å…¶é¿å…è¢« Tun è·¯ç”±æµé‡
  # exclude-uid:
  #  - 1000

  # æ’é™¤ç”¨æˆ·èŒƒå›´ï¼Œä½¿å…¶é¿å…è¢« Tun è·¯ç”±æµé‡
  # exclude-uid-range:
  #    - 1000:9999

  # åŒ…å«çš„ Android ç”¨æˆ·ï¼Œä½¿å…¶è¢« Tun è·¯ç”±æµé‡ï¼Œæœªè¢«é…ç½®çš„ç”¨æˆ·ä¸ä¼šè¢« Tun è·¯ç”±æµé‡
  # Android ç”¨æˆ·å’Œåº”ç”¨è§„åˆ™ä»…åœ¨ Android ä¸‹è¢«æ”¯æŒ,å¹¶ä¸”éœ€è¦ auto-route
  # å¸¸ç”¨ç”¨æˆ·IDï¼Œæœºä¸»ï¼š0ï¼Œæ‰‹æœºåˆ†èº«ï¼š10ï¼Œåº”ç”¨å¤šå¼€ï¼š999
  # include-android-user:
  #   - 0
  #   - 10

  # åŒ…å«çš„ Android åº”ç”¨åŒ…åï¼Œä½¿å…¶è¢« Tun è·¯ç”±æµé‡ï¼Œæœªé…ç½®çš„åº”ç”¨åŒ…ä¸ä¼šè¢« Tun è·¯ç”±æµé‡
  # include-package:
  #   - com.android.chrome

  # æ’é™¤ Android åº”ç”¨åŒ…åï¼Œä½¿å…¶é¿å…è¢« Tun è·¯ç”±æµé‡
  # exclude-package:
  #   - com.android.captiveportallogin

# é”šç‚¹
pr: &pr {type: select, proxies: [ğŸš€ å¸¸è§„ä»£ç†, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ è‡ªå®šä¹‰èŠ‚ç‚¹, DIRECT,  REJECT]}
# ç­–ç•¥ç»„
proxy-groups:
  - {name: ğŸš€ å¸¸è§„ä»£ç†, type: select, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ è‡ªå®šä¹‰èŠ‚ç‚¹, DIRECT,  REJECT]}
  - {name: ğŸ“¹ YouTube,!!merge <<: *pr}
  - {name: ğŸ€ Google,!!merge <<: *pr}
  - {name: ğŸ¤– ChatGPT,!!merge <<: *pr}
  - {name: ğŸ‘¨ğŸ¿â€ğŸ’» GitHub,!!merge <<: *pr}
  - {name: â“‚ï¸ å¾®è½¯æœåŠ¡,!!merge <<: *pr}
  - {name: ğŸ® Steam,!!merge <<: *pr}
  - {name: ğŸµ TikTok,!!merge <<: *pr}
  - {name: ğŸ“² Telegram,!!merge <<: *pr}
  - {name: ğŸ¥ NETFLIX,!!merge <<: *pr}
  - {name: ğŸ¶ ç½‘æ˜“éŸ³ä¹,!!merge <<: *pr}
  - {name: ğŸ Apple,!!merge <<: *pr}
  - {name: ğŸ¯ å…¨çƒç›´è¿,!!merge <<: *pr}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼,!!merge <<: *pr}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, type: fallback, include-all: true, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$"}
  - {name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(å°|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$" }
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(éŸ©|éŸ“|æœ|KR|(?i)Korea))^((?!(æ¸¯|å°|æ—¥|æ–°|ç¾)).)*$"}
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ–°åŠ |ç‹®|ç…|SG|(?i)Singapore))^((?!(æ¸¯|å°|æ—¥|éŸ©|å…°|ç¾)).)*$" }
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(ç¾|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$"}
  - {name: ğŸŒ è‡ªå®šä¹‰èŠ‚ç‚¹, type: select, include-all: true}
rules:
  - RULE-SET,private_domain,DIRECT
  - RULE-SET,apple_domain,ğŸ Apple
  - RULE-SET,proxys,ğŸš€ å¸¸è§„ä»£ç†
  - RULE-SET,proxylite,ğŸš€ å¸¸è§„ä»£ç†
  - RULE-SET,ai,ğŸ¤– ChatGPT
  - RULE-SET,github_domain,ğŸ‘¨ğŸ¿â€ğŸ’» GitHub
  - RULE-SET,youtube_domain,ğŸ“¹ YouTube
  - RULE-SET,google_domain,ğŸ€ Google
  - RULE-SET,NetEaseMusic,ğŸ¶ ç½‘æ˜“éŸ³ä¹
  - RULE-SET,microsoft_domain,â“‚ï¸ å¾®è½¯æœåŠ¡
  - RULE-SET,tiktok_domain,ğŸµ TikTok
  - RULE-SET,telegram_domain,ğŸ“² Telegram
  - RULE-SET,netflix_domain,ğŸ¥ NETFLIX
  - RULE-SET,steam_domain,ğŸ® Steam
  - RULE-SET,geolocation-!cn,ğŸš€ å¸¸è§„ä»£ç†
  - RULE-SET,cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,google_ip,ğŸ€ Google,no-resolve
  - RULE-SET,netflix_ip,ğŸ¥ NETFLIX,no-resolve
  - RULE-SET,telegram_ip,ğŸ“² Telegram,no-resolve
  - RULE-SET,cn_ip,ğŸ¯ å…¨çƒç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
rule-providers:
  private_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"}
  proxys: {!!merge <<: *class, url: "https://raw.githubusercontent.com/nh6666/clash-ini/refs/heads/main/Proxy.list"}
  NetEaseMusic: {!!merge <<: *class, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/NetEaseMusic.list"}
  ai: {!!merge <<: *class, url: "https://raw.githubusercontent.com/qichiyuhub/rule/refs/heads/master/AI.list"}
  youtube_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"}
  google_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"}
  github_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"}
  telegram_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"}
  netflix_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"}
  steam_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/steam.mrs"}
  microsoft_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"}
  apple_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs"}
  tiktok_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs"}
  proxylite: {!!merge <<: *class, url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list"}
  gfw_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs"}
  geolocation-!cn: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"}
  cn_domain: {!!merge <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"}
  cn_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"}
  google_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"}
  telegram_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"}
  netflix_ip: {!!merge <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs"}
